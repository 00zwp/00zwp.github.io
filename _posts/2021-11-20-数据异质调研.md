---
layout: post
title: non iid data
description: ""
subtitle: ""
data: 2021-11-20
author: Fat-Pman 
header-img: img/post-bg/6.jpg
catalog: true
tags: Papers
---

### non iid data on FL
    
#### Q1:什么是数据的非独立同分布
简单来说，就是各个设备之间数据分布$P_k(x,y)$不相同,但到底可以如何细分下去呢？

因为我们明显知道数据包括了目标对象x，类标y。可以把x，y的分布分别抽象为下图。其中，对象x的分布在高维空间中，随机，独立，但可以想象面积近似，这是由特征决定的。类标y的分布则是相对均匀，如竖线。

![分布](./img/20211220/1.png)

所以，很自然的有两种情况，一种对象x分布不同（属性倾斜），一种类标y分布不同（类标倾斜）。

#### 数据非独立同分布——细分

<font color=red>属性倾斜</font>可以根据不同设备间的数据特征重叠情况分为：不重叠特征倾斜，部分重叠特征倾斜，完全重叠特征倾斜。

不重叠特征倾斜，如图，可以理解为数据x的特征也是多维的，而不同设备拥有的特征不重叠，同属于x的一部分。

![不重叠特征倾斜](./img/20211220/2.png)

部分重叠特征倾斜，如图，一个图片旋转后会有部分信息扭曲，但是有和原来有所关联。

!(./img/20211220/3.png)

完全重叠特征倾斜，如图，这种情况一般是图片受到扰动导致的。

!(./img/20211220/4.png)

<font color=red>类标倾斜</font>则可以分为类标分布倾斜，类标表达倾斜。

类标分布倾斜，就是各个终端设备只拥有部分类标的数据，例如图，客户1、客户2同时只有两类，而一共需要判断四种类别。

!(./img/20211220/5.png)

类标表达倾斜，则是因为不同客户对同种东西的判断不一致，所以对相同x打上不同的类标。

!(./img/20211220/6.png)

其他的数据Noniid情况还有时间倾斜（车流判断，会随着时间大幅影响），数量倾斜。

#### 目前处理数据异质的方法

!(./img/20211220/7.png)

基于数据的方法： 包括数据共享与数据增强。

数据共享主要的核心就是在于能够建立一小块公共的满足独立同分布的数据，提供给所有的终端设备训练。

（5%的全局共享数据提升将近~30% 在CIFAR-10。）

数据增强包括三种：1.the vanilla method，2.the mixup method 3.GAN

第一种方法主要在于他对不同数量的数据进行了数据增强起到平衡数据异质作用。

!(./img/20211220/8.png)

第二种方法，则是利用数据加密后上传，再利用数据增强。

!(./img/20211220/9.png)

基于算法的方法：

Local fine-tuning：一个关于微调的普遍想法是建立一个基于元学习方法的高质量初始全局模型.

局部和全局信息的结合是另一种方法，对正则化和插值进行了一些研究。正则化的目的是最小化全局和局部之间的差异

Personalization layer:每个客户端模型由个性化层(填充块)和基础层组成，只有基础层需要上传到服务器以进行全局模型聚合。